import{_ as f}from"./dialog.95f029d0.js";import{N as _,L as v}from"./Login.f2711059.js";import{i as l}from"./vscodeInject.1ca292eb.js";import{_ as h}from"./checkbox.9916a5da.js";import{n as c,_ as a}from"./vueConfig.8449a054.js";import{n as r,e as s,s as g}from"./notify.6ccdfc15.js";const y={props:["full"]};var C=function(){var t=this,o=t._self._c;return o("div",{staticClass:"card-container",class:{"card-container-full":t.full}},[o("div",{staticClass:"card"},[t._t("default")],2)])},x=[],w=c(y,C,x,!1,null,"bf41e96d",null,null);const p=w.exports;const $={mixins:[l],components:{Card:p},data(){return{user:null,uploadConfirm:!1,downloadConfirm:!1,importConfirm:!1,syncKeyPath:null,triggerChooseSyncKey:!1,uploadLoading:!1,downloadLoading:!1}},mounted(){this.on("user",e=>{this.user=e}).on("importConfirm",()=>{this.importConfirm=!0}).on("importResult",({success:e,message:t,cancel:o})=>{if(this.importConfirm=!1,o)return;r({showClose:!0,duration:e?1e3:2e3,message:t,type:e?"success":"error"})}).on("downloadConfirm",()=>{this.downloadLoading=!1,this.downloadConfirm=!0}).on("donwnloadResult",({success:e,message:t})=>{this.downloadLoading=!1,r({showClose:!0,duration:e?1e3:5e3,message:t,type:e?"success":"error"})}).on("uploadRes",e=>{this.uploadLoading=!1,r({showClose:!0,duration:1e3,message:e.msg,type:e.success?"success":"error"})}).on("syncKey",e=>{(!this.syncKeyPath||this.triggerChooseSyncKey)&&(this.syncKeyPath=e,this.triggerChooseSyncKey=!1)})},methods:{clearCache(){this.emit("clearCache")},reportIssue(){this.emit("open","https://github.com/cweijan/vscode-database-client/issues")},editConfig(){this.emit("editConfig")},chooseSyncKey(){this.triggerChooseSyncKey=!0,this.emit("chooseSyncKey")},exportConfig(){if(!this.isPay){s("Free account not support export configuration!");return}this.emit("exportConfig")},importConfig(e){if(!this.isPay){s("Free account not support import configuration!");return}this.emit("importConfig",e)},uploadConfig(){if(!this.isPay){s("Free account not support upload configuration!");return}this.uploadConfirm=!1,this.uploadLoading=!0,this.emit("uploadConfig",this.syncKeyPath)},downloadConfig(e){if(!this.isPay){s("Free account not support sync data!");return}this.downloadConfirm=!1,this.downloadLoading=!0,this.emit("downloadConfig",{keyPath:this.syncKeyPath,type:e})}},computed:{isPay(){return this.user&&this.user.expireTime>new Date().getTime()}}};var b=function(){var t=this,o=t._self._c;return o("div",[o("Card",[o("div",{staticStyle:{"min-width":"300px"}},[o("div",{staticStyle:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},[t._v(" "+t._s(t.$t("console.configuration"))+" ")]),o("div",{staticStyle:{margin:"20px 0"}},[o("vsc-button",{attrs:{icon:"codicon-edit"},on:{click:t.editConfig}},[t._v(t._s(t.$t("console.edit"))+" ")]),o("vsc-button",{attrs:{icon:"codicon-arrow-down"},on:{click:t.exportConfig}},[t._v(t._s(t.$t("console.export"))+" ")]),o(a,{staticClass:"ml-7px",attrs:{placement:"top",width:"360",value:t.importConfirm,trigger:"manual"}},[o("p",[t._v(t._s(t.$t("console.mergeConfirm")))]),o("div",{staticStyle:{"text-align":"right",margin:"0"}},[o("vsc-button",{attrs:{type:"secondary"},on:{click:function(n){t.importConfirm=!1}}},[t._v(t._s(t.$t("common.cancel")))]),o("vsc-button",{on:{click:function(n){return t.importConfig("merge")}}},[t._v(t._s(t.$t("console.merge")))]),o("vsc-button",{on:{click:function(n){return t.importConfig("overwrite")}}},[t._v(t._s(t.$t("console.overwrite")))])],1),o("template",{slot:"reference"},[o("vsc-button",{attrs:{icon:"codicon-arrow-up"},on:{click:function(n){return t.importConfig()}}},[t._v(t._s(t.$t("console.import"))+" ")])],1)],2)],1)])]),o("Card",[o("div",[o("div",{staticStyle:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},[t._v(" "+t._s(t.$t("console.sync"))+" ")]),o("div",{staticStyle:{margin:"20px 0"}},[o(a,{attrs:{placement:"top",width:"360",value:t.uploadConfirm,trigger:"manual"}},[o("p",{staticStyle:{"margin-top":"5px","margin-bottom":"10px"}},[t._v(t._s(t.$t("console.uploadConfirm")))]),o("div",{staticStyle:{"text-align":"right",margin:"0"}},[o("vsc-button",{attrs:{type:"secondary"},on:{click:function(n){t.uploadConfirm=!1}}},[t._v(t._s(t.$t("common.cancel")))]),o("vsc-button",{on:{click:t.uploadConfig}},[t._v(t._s(t.$t("result.confirm")))])],1),o("template",{slot:"reference"},[o("vsc-button",{attrs:{icon:"codicon-cloud-upload",loading:t.uploadLoading},on:{click:function(n){t.uploadConfirm=!0}}},[t._v(t._s(t.$t("console.upload")))])],1)],2),o(a,{staticClass:"ml-7px",attrs:{placement:"top",width:"360",value:t.downloadConfirm,trigger:"manual"}},[o("p",{staticStyle:{"margin-top":"5px","margin-bottom":"10px"}},[t._v(t._s(t.$t("console.mergeConfirm")))]),o("div",{staticStyle:{"text-align":"right",margin:"0"}},[o("vsc-button",{attrs:{type:"secondary"},on:{click:function(n){t.downloadConfirm=!1}}},[t._v(t._s(t.$t("common.cancel")))]),o("vsc-button",{on:{click:function(n){return t.downloadConfig("merge")}}},[t._v(t._s(t.$t("console.merge")))]),o("vsc-button",{on:{click:function(n){return t.downloadConfig("overwrite")}}},[t._v(t._s(t.$t("console.overwrite")))])],1),o("template",{slot:"reference"},[o("vsc-button",{attrs:{icon:"codicon-cloud-download",loading:t.downloadLoading},on:{click:function(n){return t.downloadConfig()}}},[t._v(t._s(t.$t("console.download")))])],1)],2),o("div",{staticStyle:{"margin-top":"20px"}},[o("vsc-input",{staticClass:"!w-52 !text-sm",attrs:{size:"mini",placeholder:"Encryption Key"},model:{value:t.syncKeyPath,callback:function(n){t.syncKeyPath=n},expression:"syncKeyPath"}}),o("vsc-button",{staticClass:"!ml-1",attrs:{icon:"codicon-file"},on:{click:t.chooseSyncKey}},[t._v(t._s(t.$t("common.choose")))])],1)],1)])]),o("Card",[o("div",[o("div",{staticStyle:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},[t._v(" Others ")]),o("div",{staticStyle:{margin:"20px 0"}},[o("vsc-button",{attrs:{icon:"codicon-github-inverted",size:"mini"},on:{click:t.reportIssue}},[t._v(" "+t._s(t.$t("toolbar.reportIssue"))+" ")]),o("vsc-button",{attrs:{icon:"codicon-clear-all",size:"mini"},on:{click:t.clearCache}},[t._v(" "+t._s(t.$t("toolbar.clearCache"))+" ")])],1)])])],1)},S=[],k=c($,b,S,!1,null,"ce976090",null,null);const P=k.exports,d=["preferConnectionName","disableSqlCodeLen","autoGetTableCount","splitEditorWhenQuery","toggleLayoutWhenQuery","recordSelectSQL","executeCursorSQLByShortcut","fetchColumnWhenOpenTable","saveConnectionExpandedState"];const L={mixins:[l],components:{Card:p,CloudConfig:P},mounted(){this.emit("options").on("options",({options:e,optionMap:t})=>{this.options=e,this.optionMap=t}).on("user",e=>{this.user=e}).on("configSuccess",e=>{r({showClose:!0,duration:1e3,message:e,type:"success"})}).on("resetSuccess",e=>{r({showClose:!0,duration:1e3,message:e,type:"success"}),this.emit("options")})},data(){return{options:[],user:null,optionMap:{}}},methods:{resetOption(e){this.emit("resetOption",e)},changeOpt(e,t){if(t&&!this.isPay){s("Free account not support update premium options!");return}const o=!e.value;e.value=o,this.emit("updateOption",{...e,value:o})}},computed:{optionTypes(){return[{title:"Basic Options",needPay:!1,options:this.options.filter(e=>!d.includes(e.name))},{title:"Premium Options",needPay:!0,options:this.options.filter(e=>d.includes(e.name))}]},isPay(){return this.user&&this.user.expireTime>new Date().getTime()}}};var K=function(){var t=this,o=t._self._c;return o("div",{staticClass:"flex flex-wrap pt-24 justify-center"},[o("CloudConfig"),t._l(t.optionTypes,function(n,u){return o("Card",{key:u,staticStyle:{"max-width":"330px","min-width":"300px"}},[o("div",{staticClass:"option-title"},[t._v(" "+t._s(n.title)+" ")]),o("div",{staticClass:"option-list"},t._l(n.options,function(i,m){return o("div",{key:m},[i.type=="boolean"?o(h,{staticClass:"option-checkbox",attrs:{value:i.value,readonly:!t.isPay},on:{change:function(B){return t.changeOpt(i,n.needPay)}}},[t._v(t._s(i.description))]):t._e()],1)}),0),o("div",{staticStyle:{"text-align":"center"}},[o("vsc-button",{attrs:{icon:"codicon codicon-wand",size:"mini"},on:{click:function(i){return t.resetOption(n.options)}}},[t._v(t._s(t.$t("console.resetConfig")))])],1)])})],2)},O=[],F=c(L,K,O,!1,null,"397e3601",null,null);const z=F.exports,V={mixins:[l],components:{NavBar:_,Login:v,ExtOption:z},data(){return{user:null,dialogVisible:!0,accountVisible:!1}},mounted(){this.focusHolder(),this.on("user",e=>{this.user=e,this.accountVisible=!1}).init()},methods:{login(e){this.emit("bindUser",e),this.user=e,this.accountVisible=!1},logout(){this.emit("bindUser",null),this.user=null,g("Log out success!")},focusHolder(){window.onfocus=()=>{this.emit("getUser")}}}};var R=function(){var t=this,o=t._self._c;return o("div",[o("NavBar",{attrs:{user:t.user,hidePlan:!0},on:{openLogin:function(n){t.accountVisible=!0},logout:t.logout}}),o("ExtOption"),o(f,{attrs:{closeOnClickModal:!1,"custom-class":"accountDialog",visible:t.accountVisible,"modal-append-to-body":!1,width:"420px",top:"3vh"},on:{"update:visible":function(n){t.accountVisible=n}}},[o("Login",{on:{login:t.login}})],1)],1)},E=[],T=c(V,R,E,!1,null,null,null,null);const U=T.exports;export{U as default};
