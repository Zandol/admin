import{_ as a,a as n}from"./form.074c66d7.js";import{_ as r}from"./dialog.95f029d0.js";import{_ as c,a as s}from"./table.a22df2d5.js";import{i as p}from"./vscodeInject.1ca292eb.js";import{n as d}from"./vueConfig.8449a054.js";import"./checkbox.9916a5da.js";import"./scrollbar.17ff5e4e.js";import"./index.c53e94d1.js";import"./checkbox-group.533d9657.js";import"./index.0138aacd.js";const m={mixins:[p],data(){return{title:"",config:{},forwardList:[],error:!1,errorMessage:"",panel:{visible:!1,loading:!1,edit:{}}}},mounted(){this.on("forwardList",o=>{this.forwardList=o,this.panel.loading=!1,this.panel.visible=!1}).on("config",o=>{this.title=o.host,this.config=o}).on("success",o=>{this.error=!1,this.emit("load")}).on("error",o=>{this.panel.loading=!1,this.error=!0,this.errorMessage=o}).init()},methods:{createRequest(){this.panel.edit={localHost:"127.0.0.1",remoteHost:"127.0.0.1"},this.panel.visible=!0},load(){this.emit("load")},confirmSave(){this.emit("save",this.panel.edit),this.panel.loading=!0},info(o){this.emit("cmd",`ssh  -qTnN -L ${o.localHost}:${o.localPort}:${o.remoteHost}:${o.remotePort} ${this.config.username}@${this.config.host}`)},start(o){this.emit("start",o)},stop(o){this.emit("stop",o)},remove(o){this.emit("remove",o)},openEdit(o){this.panel.edit=o,this.panel.visible=!0},deleteConfirm(o){this.$confirm("Are you sure you want to delete this forward?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.remove(o)})}}};var u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[t.error?e("blockquote",{staticClass:"panel",attrs:{id:"error"}},[e("p",{staticClass:"panel__text"},[t._v(" Connection error! "),e("span",{attrs:{id:"errorMessage"},domProps:{textContent:t._s(t.errorMessage)}}),e("br")])]):t._e(),e(c,{staticStyle:{width:"100%"},attrs:{data:t.forwardList}},[e(s,{attrs:{prop:"name",label:"name"}}),e(s,{attrs:{prop:"localHost",label:"Local Host"}}),e(s,{attrs:{prop:"localPort",label:"Local Port"}}),e(s,{attrs:{prop:"remoteHost",label:"Remote Host"}}),e(s,{attrs:{prop:"remotePort",label:"Remote Port"}}),e(s,{attrs:{prop:"state",label:"State"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(i.row.state==!0?"running":"stop")+" ")]}}])}),e(s,{attrs:{fixed:"right",width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.state?t._e():e("vsc-button",{attrs:{type:"success",size:"small",title:"Start",icon:"el-icon-video-play",circle:""},on:{click:function(l){return t.start(i.row.id)}}}),i.row.state?e("vsc-button",{attrs:{type:"danger",size:"small",title:"Stop",icon:"el-icon-switch-button",circle:""},on:{click:function(l){return t.stop(i.row.id)}}}):t._e(),e("vsc-button",{attrs:{type:"primary",size:"small",title:"Edit",icon:"el-icon-edit",circle:""},on:{click:function(l){return t.openEdit(i.row)}}}),e("vsc-button",{attrs:{size:"small",title:"Show command",icon:"el-icon-info",circle:""},on:{click:function(l){return t.info(i.row)}}}),e("vsc-button",{attrs:{title:"delete",type:"danger",size:"small",icon:"el-icon-delete",circle:""},on:{click:function(l){return t.deleteConfirm(i.row.id)}}})]}}])},[e("template",{slot:"header"},[e("vsc-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"small",circle:""},on:{click:t.createRequest}}),e("vsc-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"small",circle:""},on:{click:t.load}})],1)],2)],1),e(r,{ref:"editDialog",attrs:{title:"Foward Port By SSH",visible:t.panel.visible,width:"600px",top:"3vh",closeOnClickModal:!1},on:{"update:visible":function(i){return t.$set(t.panel,"visible",i)}}},[e(a,{ref:"infoForm",attrs:{model:t.panel.edit,"label-width":"120px"}},[e(n,{attrs:{size:"mini",label:"Name"}},[e("vsc-input",{model:{value:t.panel.edit.name,callback:function(i){t.$set(t.panel.edit,"name",i)},expression:"panel.edit.name"}})],1),e("div",{staticClass:"flex flex-row"},[e("div",{staticClass:"basis-1/2"},[e(n,{attrs:{size:"mini",label:"Local Host"}},[e("vsc-input",{model:{value:t.panel.edit.localHost,callback:function(i){t.$set(t.panel.edit,"localHost",i)},expression:"panel.edit.localHost"}})],1)],1),e("div",{staticClass:"basis-1/2"},[e(n,{attrs:{size:"mini",label:"Local Port"}},[e("vsc-input",{model:{value:t.panel.edit.localPort,callback:function(i){t.$set(t.panel.edit,"localPort",i)},expression:"panel.edit.localPort"}})],1)],1)]),e("div",{staticClass:"flex flex-row"},[e("div",{staticClass:"basis-1/2"},[e(n,{attrs:{size:"mini",label:"Remote Host"}},[e("vsc-input",{model:{value:t.panel.edit.remoteHost,callback:function(i){t.$set(t.panel.edit,"remoteHost",i)},expression:"panel.edit.remoteHost"}})],1)],1),e("div",{staticClass:"basis-1/2"},[e(n,{attrs:{size:"mini",label:"Remote Port"}},[e("vsc-input",{nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.confirmSave.apply(null,arguments)}},model:{value:t.panel.edit.remotePort,callback:function(i){t.$set(t.panel.edit,"remotePort",i)},expression:"panel.edit.remotePort"}})],1)],1)])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("vsc-button",{attrs:{type:"secondary",size:"mini"},on:{click:function(i){t.panel.visible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),e("vsc-button",{attrs:{loading:t.panel.loading,size:"mini"},on:{click:t.confirmSave}},[t._v("Save")])],1)],1)],1)},f=[],v=d(m,u,f,!1,null,"44098361",null,null);const H=v.exports;export{H as default};
