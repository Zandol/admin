import{_ as n,a as i}from"./table.a22df2d5.js";import{_ as o}from"./switch.7457ceae.js";import{n as c,g as l}from"./vueConfig.8449a054.js";import"./checkbox.9916a5da.js";import"./scrollbar.17ff5e4e.js";import"./index.c53e94d1.js";import"./checkbox-group.533d9657.js";import"./index.0138aacd.js";import"./focus.d0673314.js";let r;const p={data(){return{autoRefresh:!1,refreshTimer:null,refreshInterval:2e3,connectionStatus:{},statusConnection:null}},mounted(){r=l(),this.refreshInit(),r.on("info",e=>{this.initStatus(e)}),r.emit("routed")},destroyed(){clearInterval(this.refreshTimer),r.destroy()},methods:{refreshInit(){this.refreshTimer=setInterval(()=>{this.autoRefresh&&r.emit("routed")},2e3)},sortByKeys(e,s){return e.keys-s.keys},sortByExpires(e,s){return e.expires-s.expires},sortByTTL(e,s){return e.avg_ttl-s.avg_ttl},initStatus(e){if(!e)return{};e=e.split(`
`);const s={};for(let t of e){if(t=t.replace(/\s/gi,""),t.startsWith("#")||!t)continue;const a=t.split(":");s[a[0]]=a[1]}this.connectionStatus=s}},computed:{DBKeys(){const e=[];for(const s in this.connectionStatus)if(s.startsWith("db")){const a=this.connectionStatus[s].split(",");e.push({db:s,keys:a[0].split("=")[1],expires:a[1].split("=")[1],avg_ttl:a[2].split("=")[1]})}return e},AllRedisInfo(){const e=[];for(const s in this.connectionStatus)e.push({key:s,value:this.connectionStatus[s]});return e}}};var v=function(){var s=this,t=s._self._c;return t("div",{staticClass:"redis-status-container",attrs:{id:"app"}},[t("div",[t("vsc-tag",{attrs:{type:"info"}},[t("i",{staticClass:"el-icon-refresh"}),s._v(" Auto Refresh ")]),t("vsc-tooltip",{staticClass:"item",staticStyle:{"margin-left":"20px"},attrs:{effect:"dark",content:"Auto Refresh Switch, Refresh Every 2 Seconds",placement:"bottom"}},[t(o,{on:{change:s.refreshInit},model:{value:s.autoRefresh,callback:function(a){s.autoRefresh=a},expression:"autoRefresh"}})],1)],1),t("div",{staticClass:"grid grid-cols-3 gap-4 mt-4 px-3"},[t("div",{staticClass:"col-span-1"},[t("div",{staticClass:"box-card p-3 bg-secondBg mb-3"},[t("span",{staticClass:"text-base mb-2 block"},[s._v("Server")]),t("p",{staticClass:"server-status-tag-p"},[t("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[s._v(" Redis Version: "),t("span",{staticClass:"server-status-text"},[s._v(s._s(this.connectionStatus.redis_version))])])],1),t("p",{staticClass:"server-status-tag-p"},[t("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[s._v(" OS: "),t("span",{staticClass:"server-status-text",attrs:{title:s.connectionStatus.os}},[s._v(s._s(this.connectionStatus.os))])])],1),t("p",{staticClass:"server-status-tag-p"},[t("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[s._v(" Process ID: "),t("span",{staticClass:"server-status-text"},[s._v(s._s(this.connectionStatus.process_id))])])],1)])]),t("div",{staticClass:"col-span-1"},[t("div",{staticClass:"box-card p-3 bg-secondBg mb-3"},[t("span",{staticClass:"text-base mb-2 block"},[s._v(" Memory")]),t("p",{staticClass:"server-status-tag-p"},[t("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[s._v(" Used Memory: "),t("span",{staticClass:"server-status-text"},[s._v(s._s(this.connectionStatus.used_memory_human))])])],1),t("p",{staticClass:"server-status-tag-p"},[t("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[s._v(" Used Memory Peak: "),t("span",{staticClass:"server-status-text"},[s._v(s._s(this.connectionStatus.used_memory_peak_human))])])],1),t("p",{staticClass:"server-status-tag-p"},[t("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[s._v(" Used Memory Lua: "),t("span",{staticClass:"server-status-text"},[s._v(s._s(Math.round(this.connectionStatus.used_memory_lua/1024))+"K")])])],1)])]),t("div",{staticClass:"col-span-1"},[t("div",{staticClass:"box-card p-3 bg-secondBg mb-3"},[t("span",{staticClass:"text-base mb-2 block"},[s._v("Stats")]),t("p",{staticClass:"server-status-tag-p"},[t("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[s._v(" Connected Clients: "),t("span",{staticClass:"server-status-text"},[s._v(s._s(this.connectionStatus.connected_clients))])])],1),t("p",{staticClass:"server-status-tag-p"},[t("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[s._v(" Total Connections: "),t("span",{staticClass:"server-status-text"},[s._v(s._s(this.connectionStatus.total_connections_received))])])],1),t("p",{staticClass:"server-status-tag-p"},[t("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[s._v(" Total Commands: "),t("span",{staticClass:"server-status-text"},[s._v(s._s(this.connectionStatus.total_commands_processed))])])],1)])])]),t("div",{staticClass:"mt-4 px-3"},[t("div",{staticClass:"box-card p-3 bg-secondBg mb-3"},[t("span",{staticClass:"text-base mb-2 block"},[s._v("Key Statistics")]),t(n,{attrs:{data:s.DBKeys}},[t(i,{attrs:{prop:"db",label:"DB"}}),t(i,{attrs:{sortable:"",prop:"keys",label:"Keys","sort-method":s.sortByKeys}}),t(i,{attrs:{sortable:"",prop:"expires",label:"Expires","sort-method":s.sortByExpires}}),t(i,{attrs:{sortable:"",prop:"avg_ttl",label:"Avg TTL","sort-method":s.sortByTTL}})],1)],1)]),t("div",{staticClass:"mt-4 px-3"},[t("div",{staticClass:"box-card p-3 bg-secondBg mb-3"},[t("span",{staticClass:"text-base mb-2 block"},[s._v(" All Redis Info")]),t(n,{attrs:{data:s.AllRedisInfo}},[t(i,{attrs:{prop:"key",label:"Key"}}),t(i,{attrs:{prop:"value",label:"Value"}})],1)],1)])])},u=[],_=c(p,v,u,!1,null,"834df5b7",null,null);const S=_.exports;export{S as default};
