import{c as p}from"./g2.105c066e.js";import{i as y}from"./vscodeInject.1ca292eb.js";import{n as S}from"./vueConfig.8449a054.js";class f{constructor(t,s){this.ele=t,this.option=s}update(t){const s=t.percent;this.updateAnnotaion(s),this.chart.changeData([{value:s}])}render(){p.registerShape("point","pointer",{draw(r,d){const h=r.points[0],i=this.parsePoint({x:0,y:0}),a=this.parsePoint({x:h.x,y:.9}),e={x:i.x-a.x,y:i.y-a.y},n=Math.sqrt(e.x*e.x+e.y*e.y);e.x*=1/n,e.y*=1/n;const c=-Math.PI/2,l=Math.cos(c)*e.x-Math.sin(c)*e.y,g=Math.sin(c)*e.x+Math.cos(c)*e.y,u=Math.PI/2,v=Math.cos(u)*e.x-Math.sin(u)*e.y,_=Math.sin(u)*e.x+Math.cos(u)*e.y,m=[["M",a.x+l*1,a.y+g*1],["L",i.x+l*3,i.y+g*3],["L",i.x+v*3,i.y+_*3],["L",a.x+v*1,a.y+_*1],["Z"]];return d.addShape("path",{attrs:{path:m,fill:r.color}})}});const t=new p.Chart({container:this.ele,autoFit:!0,width:this.option.width,height:this.option.height,padding:[0,0,0,0]});this.chart=t,t.coordinate("polar",{startAngle:-10/8*Math.PI,endAngle:2/8*Math.PI,radius:.75}),t.scale("value",{min:0,max:1,tickInterval:1}),t.axis(!1);const s={value:0};t.point().position("value*1").shape("pointer").color("#d8d8d8").animate({appear:{animation:"fade-in"}}),this.updateAnnotaion(s.value),t.data([s]),t.render()}updateAnnotaion(t){var r;this.chart.annotation().clear(!0),this.chart.annotation().arc({top:!1,start:[0,1],end:[1,1],style:{stroke:"#ebedf0",lineWidth:10}}),this.chart.annotation().arc({start:[0,1],end:[Math.min(t,1),1],style:{stroke:"#5B8FF9",lineWidth:10}});const s=parseInt(`${t*100}`,10);this.chart.annotation().text({position:["50%","75%"],content:`${s}%`,style:{fontSize:14,fill:(r=this.option.fColor)!=null?r:"#E8EDF3",fontWeight:500,textAlign:"center"},offsetX:0,offsetY:10})}}const x={name:"status",mixins:[y],data(){return{info:{os:"Ubuntu 20.04.3 LTS",kernelVersion:"5.4.0-121-generic",arch:"x86_64",hostname:"localhost",upTime:"0",diskUsage:{total:"0G",used:"0G",available:"0G",usePercent:0},memoryUsage:{total:"0 GB",used:"0 GB",free:"0 MB",usePercent:0},cpu:{name:"",clock:"0GHz",logicCoreCount:"0",usePercent:0}},dashBoard:{traffic:{data:[],lock:!1,chart:null,previous:null}}}},mounted(){const o=this.getColor("--vscode-editor-foreground"),t=new f("cpuUsage",{height:120,width:120,autoFit:!1,percent:this.info.cpu.usePercent,color:["#5B8FF9","#E8EDF3"],fColor:o,statistic:{content:{style:{color:"var(--vscode-editor-foreground)"}}}});t.render();const s=new f("diskUsage",{height:120,width:120,autoFit:!1,percent:this.info.diskUsage.usePercent,color:["#5B8FF9","#E8EDF3"],fColor:o,statistic:{content:{style:{color:"var(--vscode-editor-foreground)"}}}});s.render();const r=new f("memoryUsage",{height:120,width:120,autoFit:!1,percent:this.info.memoryUsage.usePercent,color:["#5B8FF9","#E8EDF3"],fColor:o,statistic:{content:{style:{color:"var(--vscode-editor-foreground)"}}}});r.render();const d=(i,a)=>{const e=new p.Chart({container:i,autoFit:!0,height:300});return e.data(a),e.axis("value",{label:{style:{fill:o},formatter:n=>`${n}KB`}}),e.axis("now",{label:{style:{fill:o}}}),e.legend({itemName:{style:{fill:o}}}),e.line().position("now*value").color("type").size(2),e.render(),e};function h(i,a,e,n){const c=JSON.parse(JSON.stringify(e));if(a.previous||(a.previous=c),a.data.push(...e),n&&n(e,a.previous),a.previous=c,!a.chart)a.chart=d(i,a.data);else{if(a.data.length>=e.length*60)for(let l=0;l<e.length;l++)a.data.shift();a.chart.changeData(a.data)}a.lock=!1}this.on("info",i=>{this.info=i,r.update({percent:i.memoryUsage.usePercent}),s.update({percent:i.diskUsage.usePercent}),t.update({percent:i.cpu.usePercent})}).on("network",i=>{h("traffic",this.dashBoard.traffic,i,(a,e)=>{for(let n=0;n<e.length;n++)a[n].value=parseFloat(((a[n].value-e[n].value)/1024).toFixed(2))})}).init(),this.emit("network"),setInterval(()=>{this.emit("network")},1e3)},methods:{getColor(o){return document.documentElement.style.getPropertyValue(o)},remainHeight(){return window.outerHeight-150}}};var C=function(){var t=this,s=t._self._c;return s("div",{staticClass:"status-container"},[s("div",{staticClass:"info-container"},[s("div",{staticStyle:{display:"inline-block","margin-right":"50px"}},[s("div",{staticClass:"info-title"},[t._v(" "+t._s(t.$t("sshStatus.systemInfo"))+": ")]),s("div",[t._v(" "+t._s(t.$t("sshStatus.runTime"))+": "+t._s(t.info.upTime)+" ")]),s("span",{staticClass:"info-col"},[t._v(t._s(t.$t("sshStatus.arch"))+": "+t._s(t.info.arch))]),s("span",{staticClass:"info-col"},[t._v(t._s(t.$t("sshStatus.hostname"))+": "+t._s(t.info.hostname))]),s("span",{staticClass:"info-col"},[t._v(t._s(t.$t("sshStatus.os"))+": "+t._s(t.info.os)+" ")]),s("span",{staticClass:"info-col"},[t._v(t._s(t.$t("sshStatus.kernelVersion"))+": "+t._s(t.info.kernelVersion))])]),s("div",{staticStyle:{display:"inline-block"}},[s("div",{staticClass:"info-title"},[t._v(" "+t._s(t.$t("sshStatus.cpuInfo"))+": ")]),s("div",[s("span",{staticClass:"info-col"},[t._v(" "+t._s(t.$t("sshStatus.cpuClock"))+":"+t._s(t.info.cpu.clock)+" ")]),s("span",{staticClass:"info-col"},[t._v(" "+t._s(t.$t("sshStatus.cpuCoreCount"))+":"+t._s(t.info.cpu.logicCoreCount)+" ")]),s("span",{staticClass:"info-col"},[t._v(" "+t._s(t.$t("sshStatus.cpuName"))+": "+t._s(t.info.cpu.name)+" ")])])])]),s("div",[s("div",{staticClass:"info-title"},[t._v(" "+t._s(t.$t("sshStatus.systemStatus"))+": ")]),s("div",{staticClass:"ring-graph-status"},[s("div",{staticStyle:{margin:"auto"}},[t._v("CPU")]),s("div",{staticStyle:{margin:"auto"},attrs:{id:"cpuUsage"}}),s("div",{staticStyle:{margin:"auto"}},[t._v(" "+t._s(t.info.cpu.clock)+" ")])]),s("div",{staticClass:"ring-graph-status"},[s("div",{staticStyle:{margin:"auto"}},[t._v(" "+t._s(t.$t("sshStatus.memory")))]),s("div",{staticStyle:{margin:"auto"},attrs:{id:"memoryUsage"}}),s("div",{staticStyle:{margin:"auto"}},[t._v(" "+t._s(t.info.memoryUsage.used)+"/"+t._s(t.info.memoryUsage.total)+" ")])]),s("div",{staticClass:"ring-graph-status"},[s("div",{staticStyle:{margin:"auto"}},[t._v(" "+t._s(t.$t("sshStatus.disk")))]),s("div",{staticStyle:{margin:"auto"},attrs:{id:"diskUsage"}}),s("div",{staticStyle:{margin:"auto"}},[t._v(" "+t._s(t.info.diskUsage.used)+"/"+t._s(t.info.diskUsage.total)+" ")])])]),s("div",{staticStyle:{"margin-top":"30px"}},[s("div",{staticClass:"info-title"},[t._v(" "+t._s(t.$t("sshStatus.network"))+": ")]),s("div",{staticStyle:{width:"600px"},attrs:{id:"traffic"}})])])},k=[],P=S(x,C,k,!1,null,null,null,null);const M=P.exports;export{M as default};
